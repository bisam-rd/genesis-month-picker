<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>genesis-month-picker test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../genesis-month-picker.html">
  </head>
  <body>

    <test-fixture id="BasicTestFixture">
      <template>
        <genesis-month-picker value="2018-12-20"></genesis-month-picker>
      </template>
    </test-fixture>

    <test-fixture id="LocaleTestFixture">
        <template>
          <genesis-month-picker value="2018-12-20" locale="en-US"></genesis-month-picker>
        </template>
      </test-fixture>

    <test-fixture id="ChangedPropertyTestFixture">
      <template>
        <genesis-month-picker prop1="new-prop1"></genesis-month-picker>
      </template>
    </test-fixture>

    <script>
      suite('genesis-month-picker', () => {

        test('the date of the Genesis Month Picker should be positionned to end of month', () => {
          const element = fixture('BasicTestFixture');
          assert.equal(element.value, '2018-12-31');
        });

        test('the default locale of the Genesis Month Picker should be french', () => {
          const element = fixture('BasicTestFixture');
          assert.equal(element.value, '2018-12-31');

          const elementShadowRoot = element.shadowRoot;
          const dateField = elementShadowRoot.querySelector('#dateField');
          assert.equal(dateField.value, '31/12/2018');
        });

        test('the local prop should override the default locale', () => {
          const element = fixture('LocaleTestFixture');
          assert.equal(element.value, '2018-12-31');

          const elementShadowRoot = element.shadowRoot;
          const dateField = elementShadowRoot.querySelector('#dateField');
          assert.equal(dateField.value, '12/31/2018');
        });

        test('Changing the date field should be reflected on the date value ', () => {
          const element = fixture('BasicTestFixture');
          assert.equal(element.value, '2018-12-31');

          const elementShadowRoot = element.shadowRoot;
          const dateField = elementShadowRoot.querySelector('#dateField');
          dateField.value = '04/01/2019';
          assert.equal(dateField.value, '31/01/2019');
          assert.equal(element.value, '2019-01-31');
        });
/*
        test('Setting no value in the date field should set the backing value to the currentDate', () => {
          const element = fixture('BasicTestFixture');
          assert.equal(element.value, '2018-12-31');
          const dateNow=new Date();
          const dateNowAsString=new Date(dateNow.getFullYear(), dateNow.getMonth()+1,0);
          
          const elementShadowRoot = element.shadowRoot;
          const dateField = elementShadowRoot.querySelector('#dateField');
          dateField.value = '';
       //   assert.equal(dateField.value, '');
          assert.equal(element.value, dateNowAsString);
        });
*/

        // Create a test fixture
      /*    const element = fixture('ChangedPropertyTestFixture');
          assert.equal(element.prop1, 'new-prop1');
          const elementShadowRoot = element.shadowRoot;
          const dateField = elementShadowRoot.querySelector('h2');
          assert.equal(dateField.innerHTML, 'Hello new-prop1!');
        });test('setting a property on the element works', () => {
        
*/
      });
    </script>

  </body>
</html>
